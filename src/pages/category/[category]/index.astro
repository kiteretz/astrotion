---
import TaxonomyMain from "../../../layouts/TaxonomyMain.astro";
import { client } from "../../../lib";

export async function getStaticPaths() {
  const cats = await client.getAllCategories();
  return Array.from(cats).map((category) => ({
    params: { category },
  }));
}

const { category } = Astro.params;
const { pageCount, pageInt, posts } = await client.listPosts(
  "1",
  (post) => post.category === category,
);
---

<TaxonomyMain
  taxonomy={"category"}
  term={category}
  siteTitle={"hyacker"}
  pageInt={pageInt}
  pageCount={pageCount}
  posts={posts}
/>
